# Migration `20200520173203-real-schema`

This migration has been generated by Will Bunting at 5/20/2020, 5:32:03 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Series" (
"data" jsonb  NOT NULL ,"id" SERIAL,"name" text  NOT NULL ,"scenarioId" integer   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Scenario" (
"id" SERIAL,"locationId" integer   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Location" (
"id" SERIAL,"slug" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "Location.slug" ON "public"."Location"("slug")

ALTER TABLE "public"."Series" ADD FOREIGN KEY ("scenarioId")REFERENCES "public"."Scenario"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Scenario" ADD FOREIGN KEY ("locationId")REFERENCES "public"."Location"("id") ON DELETE SET NULL  ON UPDATE CASCADE

DROP TABLE "public"."User";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200520172403-init..20200520173203-real-schema
--- datamodel.dml
+++ datamodel.dml
@@ -1,15 +1,29 @@
 datasource postgresql {
-  url = "***"
+  url      = env("DATABASE_URL")
   provider = "postgresql"
 }
 generator client {
   provider = "prisma-client-js"
 }
-model User {
-  id        Int      @default(autoincrement()) @id
-  createdAt DateTime @default(now())
-  email     String   @unique
-  name      String?
+model Series {
+  id         Int       @default(autoincrement()) @id
+  name       String
+  data       Json
+  Scenario   Scenario? @relation(fields: [scenarioId], references: [id])
+  scenarioId Int?
+}
+
+model Scenario {
+  id         Int       @default(autoincrement()) @id
+  series     Series[]
+  Location   Location? @relation(fields: [locationId], references: [id])
+  locationId Int?
+}
+
+model Location {
+  id        Int        @default(autoincrement()) @id
+  slug      String     @unique
+  scenarios Scenario[]
 }
```


