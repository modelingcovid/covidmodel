# Migration `20200520175149-model-run`

This migration has been generated by Will Bunting at 5/20/2020, 5:51:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."ModelRun" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" SERIAL,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Location" ADD COLUMN "modelRunId" integer   ;

ALTER TABLE "public"."Location" ADD FOREIGN KEY ("modelRunId")REFERENCES "public"."ModelRun"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200520174701-full-data..20200520175149-model-run
--- datamodel.dml
+++ datamodel.dml
@@ -1,6 +1,6 @@
 datasource postgresql {
-  url = "***"
+  url      = env("DATABASE_URL")
   provider = "postgresql"
 }
 generator client {
@@ -10,9 +10,9 @@
 model Series {
   id         Int       @default(autoincrement()) @id
   name       String
   data       Json
-  Scenario   Scenario? @relation(fields: [scenarioId], references: [id])
+  scenario   Scenario? @relation(fields: [scenarioId], references: [id])
   scenarioId Int?
 }
 model Scenario {
@@ -37,9 +37,9 @@
   fractionOfHospitalizationsReported     Float
   distancingDays                         Int
   distancingLevel                        Float
   series                                 Series[]
-  Location                               Location? @relation(fields: [locationId], references: [id])
+  location                               Location? @relation(fields: [locationId], references: [id])
   locationId                             Int?
 }
 model Parameter {
@@ -48,12 +48,18 @@
   name        String
   description String
   type        String
   citations   String[]
-  Location    Location? @relation(fields: [locationId], references: [id])
+  location    Location? @relation(fields: [locationId], references: [id])
   locationId  Int?
 }
+model ModelRun {
+  id        Int        @default(autoincrement()) @id
+  createdAt DateTime   @default(now())
+  locations Location[]
+}
+
 model Location {
   id                       Int         @default(autoincrement()) @id
   name                     String      @unique
   dateModelRun             String
@@ -64,5 +70,7 @@
   r0                       Float
   ventilators              Int
   scenarios                Scenario[]
   parameters               Parameter[]
+  modelRun                 ModelRun?   @relation(fields: [modelRunId], references: [id])
+  modelRunId               Int?
 }
```


